<view class="page-container">
    <!-- 店家信息 -->
    <view class="store-info">
        <image class="store-logo" src="{{storeLogo}}" alt="logo" />
        <view class="store-details">
            <text class="store-name">{{storeName}}</text>
            <text class="store-location">{{storeLocation}}</text>
        </view>
    </view>

    <!-- 轮播图 -->
    <swiper class="store-swiper" autoplay interval="3000" indicator-dots indicator-active-color="#515151" circular>
        <block wx:for="{{storeImages}}" wx:key="index">
            <swiper-item>
                <image class="swiper-image" src="{{item}}" alt="store image" />
            </swiper-item>
        </block>
    </swiper>

    <!-- 选择显示商品页或评价页的bar -->
    <view class="tab-bar">
        <view class="selection-item {{selectedPage === 'products' ? 'active' : ''}}" bindtap="selectPage" data-page="products">商店</view>
        <view class="selection-item {{selectedPage === 'reviews' ? 'active' : ''}}" bindtap="selectPage" data-page="reviews">评价</view>
    </view>

    <!-- 商品类目与商品列表 -->
    <view class="menu-container" wx:if="{{selectedPage === 'products'}}">
        <!-- 商品类目 -->
        <scroll-view class="categories" scroll-y>
            <block wx:for="{{categories}}" wx:key="id">
                <view class="category-item {{selectedCategoryId === item.id ? 'active' : ''}}" bindtap="selectCategory" data-id="{{item.id}}">
                    {{item.name}}
                </view>
            </block>
        </scroll-view>

        <!-- 商品列表 -->
        <scroll-view class="product-list" wx:if="{{selectedPage === 'products'}} " scroll-y>
            <block wx:for="{{selectedCategoryProducts}}" wx:key="id">
                <view class="product-card">
                    <image class="product-image" src="{{item.image}}" alt="product image" />
                    <view class="product-details">
                        <text class="product-name">{{item.name}}</text>
                        <view class="product-info">
                            <text class="product-price">¥{{item.price}}</text>
                            <button class="spec-button" bindtap="selectSpec" data-id="{{item.id}}">选规格</button>
                        </view>
                    </view>
                </view>
            </block>
        </scroll-view>
    </view>

    <!-- 评价列表 -->
    <view class="review-container" wx:if="{{selectedPage === 'reviews'}}">
        <scroll-view class="review-list" scroll-y>
            <block wx:for="{{reviews}}" wx:key="id">
                <view class="review-card">
                    <view class="review-details">
                        <text class="review-user">{{item.user}}</text>
                        <text class="review-content">{{item.content}}</text>
                        <image class="review-image" src="{{item.image}}" mode="aspectFit" bindtap="previewImage" data-src="{{item.image}}"></image>
                    </view>
                </view>
            </block>
        </scroll-view>
    </view>

    <!-- 底部按钮 -->
    <view class="bottom-buttons-container" wx:if="{{selectedPage === 'products'}}">
        <button class="cart-button" bindtap="goToCart">购物车</button>
        <button class="checkout-button" bindtap="goToCheckout">去结算</button>
    </view>

    <view class="bottom-buttons-container" wx:if="{{selectedPage === 'reviews'}}">
        <button class="review-button" bindtap="writeReview">写评论</button>
    </view>
</view>
