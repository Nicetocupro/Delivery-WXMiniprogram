<view class="page-container">
    <!-- 店家信息 -->
    <view class="store-info">
        <image class="store-logo" src="{{storeLogo}}" alt="logo" />
        <view class="store-details">
            <text class="store-name">{{storeName}}</text>
            <text class="store-location">{{storeLocation}}</text>
        </view>
    </view>

    <!-- 轮播图 -->
    <swiper class="store-swiper" autoplay interval="3000" indicator-dots indicator-active-color="#515151" circular>
        <block wx:for="{{storeImages}}" wx:key="index">
            <swiper-item>
                <image class="swiper-image" src="{{item}}" alt="store image" />
            </swiper-item>
        </block>
    </swiper>

    <!-- 商品类目与商品列表 -->
    <view class="menu-container">
        <!-- 商品类目 -->
        <scroll-view class="categories" scroll-y>
            <block wx:for="{{categories}}" wx:key="id">
                <view class="category-item {{selectedCategoryId === item.id ? 'active' : ''}}" bindtap="selectCategory" data-id="{{item.id}}">
                    {{item.name}}
                </view>
            </block>
        </scroll-view>

        <!-- 商品列表 -->
        <scroll-view class="product-list" scroll-y>
            <block wx:for="{{selectedCategoryProducts}}" wx:key="id">
                <view class="product-card">
                    <image class="product-image" src="https://www.xiaoqingyanxuan.top/api/v1/wx/customer/dish/image/{{item.image}}/?session_id={{session_id}}" alt="product image" />
                    <view class="product-details">
                        <text class="product-name">{{item.name}}</text>
                        <view class="product-info">
                            <text class="product-price">¥{{item.price}}</text>
                            <block wx:if="{{item.flavors.length > 1}}">
                                <button class="spec-button" bindtap="selectSpec"data-id="{{item.id}}" data-flavors="{{item.flavors}}">选规格</button>
                            </block>
                            <block wx:else>
                                <button class="add-to-cart-button" bindtap="addToCart"data-id="{{item.id}}">+</button>
                            </block>
                        </view>
                    </view>
                </view>
            </block>
        </scroll-view>
    </view>

    <!-- 底部按钮 -->
    <view class="bottom-buttons-container">
        <button class="cart-button" bindtap="goToCart">购物车</button>
        <button class="checkout-button" bindtap="goToCart">去结算</button>
    </view>
</view>